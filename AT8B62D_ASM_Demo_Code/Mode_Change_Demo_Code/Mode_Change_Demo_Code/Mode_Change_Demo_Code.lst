
                    AT Win Technology Co., Ltd.

ATWASM 2.14 [Build 180510.00]  File=C:\Users\USER\Documents\ATW\ATW南翔科技专案资料\九齐相关资料\Demo Code\AT8B62D\Mode Change Demo Code\Mode Change Demo Code\Mode Change Demo Code.asm Date=2018/5/12 17:24:57

    ADDR  OPCODE/VALUE              LINE   TAG  SOURCE                   STATEMENT    

                                    0-0001                                                                 ; =========================================================================
                                    0-0002      ; Created by ATW IDE.
                                    0-0003      ; User: VincentLin
                                    0-0004      ; Date: 2015/7/17
                                    0-0005      ; Time: 13:40
                                    0-0006      ; 说明：此Demo Code 共呈现4种工作模式（Normal/Slow/standby/sleep)
                                    0-0007      ; 	┌->	开机时为Normal Mode(4M/2T)，PB0(1.024ms)转态输出约4s后进入Slow Mode。
                                    0-0008      ;	│	Slow Mode为32K/2T，PB0(32ms)转态输出3.2s后进入 Standby Mode。
                                    0-0009      ;	│	Standby Mode下约4S后唤醒(WDT唤醒），进入Normal Mode。
                                    0-0010      ;	│	Normal Mode下，PB0(1.024ms)转态输出约4s后进入Sleep Mode。
                                    0-0011      ;	└<-	Sleep Mode下，IOB3电位有变化唤醒，进入 Normal Mode。
                                    0-0012      ; =========================================================================
                                    0-0013      	#include	AT8B62D.h
                                    1-0001      ; Chip Register Define
                                    1-0002      ;; Register R
                  0                 1-   3      		INDF		EQU	0x00
                  1                 1-   4      		TMR0		EQU	0x01
                  2                 1-   5      		PCL		EQU	0x02
                                    1-0006      		
                  3                 1-   7      		STATUS		EQU	0x03
                  0                 1-   8      			C_B	= 0
                  1                 1-   9      			DC_B	= 1
                  2                 1-  10      			Z_B	= 2
                  3                 1-  11      			PD_B	= 3
                  4                 1-  12      			TO_B	= 4
                                    1-0013      			
                  6                 1-  14      			BK0_B	= 6
                  7                 1-  15      			BK1_B	= 7
                                    1-0016      			
                  4                 1-  17      		FSR		EQU	0x04
                                    1-0018      			
                  5                 1-  19      		PA		EQU	0x05
                  0                 1-  20      			PA0_B	= 0
                  1                 1-  21      			PA1_B	= 1
                  2                 1-  22      			PA2_B	= 2
                  3                 1-  23      			PA3_B	= 3
                  4                 1-  24      			PA4_B	= 4
                  5                 1-  25      			PA5_B	= 5
                  6                 1-  26      			PA6_B	= 6
                  7                 1-  27      			PA7_B	= 7
                                    1-0028      			
                  6                 1-  29      		PB		EQU	0x06
                  0                 1-  30      			PB0_B	= 0
                  1                 1-  31      			PB1_B	= 1
                  2                 1-  32      			PB2_B	= 2
                  3                 1-  33      			PB3_B	= 3
                  4                 1-  34      			PB4_B	= 4
                  5                 1-  35      			PB5_B	= 5
                  6                 1-  36      			PB6_B	= 6
                  7                 1-  37      			PB7_B	= 7
                                    1-0038      		
                  8                 1-  39      		PCON		EQU	0x08
                  3                 1-  40      			LVREN_B	= 3
                  4                 1-  41      			PHPA5_B	= 4
                  5                 1-  42      			LVDEN_B	= 5
                  7                 1-  43      			WDTEN_B	= 7
                                    1-0044      			
                  9                 1-  45      		BWUCON		EQU	0x09
                                    1-0046      		
                  A                 1-  47      		PCHBUF		EQU	0x0A
                  6                 1-  48      			XSPD_STP_B	= 6
                                    1-0049      			
                  B                 1-  50      		ABPLCON		EQU	0x0B
                  C                 1-  51      		BPHCON		EQU	0x0C
                                    1-0052      		
                  E                 1-  53      		INTE		EQU	0x0E
                  0                 1-  54      			T0IE_B		= 0 
                  1                 1-  55      			PABIE_B		= 1
                  2                 1-  56      			INT0IE_B	= 2
                  3                 1-  57      			T1IE_B		= 3
                  4                 1-  58      			LVDTIE_B	= 4
                  5                 1-  59      			T2IE_B		= 5
                  6                 1-  60      			WDTIE_B		= 6
                  7                 1-  61      			INT1IE_B	= 7
                                    1-0062      			
                  F                 1-  63      		INTF		EQU	0x0f
                  0                 1-  64      			T0IF_B		= 0
                  1                 1-  65      			PABIF_B		= 1
                  2                 1-  66      			INT0IF_B	= 2
                  3                 1-  67      			T1IF_B		= 3
                  4                 1-  68      			LVDTIF_B	= 4
                  5                 1-  69      			T2IF_B		= 5
                  6                 1-  70      			WDTIF_B		= 6
                  7                 1-  71      			INT2IF_B	= 7
                                    1-0072      		
                 10                 1-  73      		ADMD		EQU	0x10
                  0                 1-  74      			CHS0_B		= 0
                  1                 1-  75      			CHS1_B		= 1
                  2                 1-  76      			CHS2_B		= 2
                  3                 1-  77      			CHS3_B		= 3
                  4                 1-  78      			GCHS_B		= 4
                  5                 1-  79      			EOC_B		= 5
                  6                 1-  80      			START_B		= 6
                  7                 1-  81      			ADEN_B		= 7
                                    1-0082      		
                 11                 1-  83      		ADR		EQU	0x11
                  0                 1-  84      			AD0_B		= 0
                  1                 1-  85      			AD1_B		= 1
                  2                 1-  86      			AD2_B		= 2
                  3                 1-  87      			AD3_B		= 3
                  4                 1-  88      			ADCK0_B		= 4
                  5                 1-  89      			ADCK1_B		= 5
                  6                 1-  90      			ADIE_B		= 6
                  7                 1-  91      			ADIF_B		= 7
                                    1-0092      		
                 12                 1-  93      		ADD		EQU	0x12
                                    1-0094      		
                 13                 1-  95      		ADVREFH		EQU	0x13
                  0                 1-  96      			VHS0_B		= 0
                  1                 1-  97      			VHS1_B		= 1
                                    1-0098      			
                  7                 1-  99      			EVHENB_B	= 7
                                    1-0100      		
                 14                 1- 101      		ADCR		EQU	0x14
                  0                 1- 102      			ADCR0_B		= 0
                  1                 1- 103      			ADCR1_B		= 1
                  2                 1- 104      			SHCK0_B		= 2
                  3                 1- 105      			SHCK1_B		= 3
                  4                 1- 106      			PBCON4_B	= 4
                  5                 1- 107      			PBCON4_B	= 5
                  6                 1- 108      			PBCON4_B	= 6
                                    1-0109      		
                 15                 1- 110      		AWUCON		EQU	0x15
                  0                 1- 111      			WUPA0_B		= 0
                  1                 1- 112      			WUPA1_B		= 1
                  2                 1- 113      			WUPA2_B		= 2
                  3                 1- 114      			WUPA3_B		= 3		
                  4                 1- 115      			WUPA4_B		= 4
                  5                 1- 116      			WUPA5_B		= 5
                  6                 1- 117      			WUPA6_B		= 6
                  7                 1- 118      			WUPA7_B		= 7	
                                    1-0119      		
                 16                 1- 120      		PACON		EQU	0x16
                  0                 1- 121      			PACON0_B	= 0
                  1                 1- 122      			PACON1_B	= 1
                  2                 1- 123      			PACON2_B	= 2
                  3                 1- 124      			PACON3_B	= 3
                  4                 1- 125      			PACON4_B	= 4
                  5                 1- 126      			PBCON0_B	= 5
                  6                 1- 127      			PBCON1_B	= 6
                  7                 1- 128      			PBCON2_B	= 7
                                    1-0129      		
                                    1-0130      ;		ADT		EQU	0x17
                                    1-0131      ;			ADT0_B		= 0	
                                    1-0132      ;			ADT1_B		= 1
                                    1-0133      ;			ADT2_B		= 2
                                    1-0134      ;			ADT3_B		= 3
                                    1-0135      ;			ADT4_B		= 4
                                    1-0136      ;			SIGN_B		= 5
                                    1-0137      ;			CALE_B		= 6
                                    1-0138      ;			CALS_B		= 7
                                    1-0139      		
                 18                 1- 140      		INTEDG		EQU	0x18
                  0                 1- 141      			INT0G0_B	= 0
                  1                 1- 142      			INT0G1_B	= 1
                  2                 1- 143      			INT1G0_B	= 2
                  3                 1- 144      			INT1G1_B	= 3
                  4                 1- 145      			EIS0_B		= 4
                  5                 1- 146      			EIS1_B		= 5
                                    1-0147      		
                 19                 1- 148      		TMRH		EQU	0x19
                  0                 1- 149      			PWM1DUTY8_B	= 0
                  1                 1- 150      			PWM1DUTY9_B	= 1
                  2                 1- 151      			PWM2DUTY8_B	= 2
                  3                 1- 152      			PWM2DUTY9_B	= 3
                  4                 1- 153      			TMR18_B		= 4
                  5                 1- 154      			TMR19_B		= 5
                  6                 1- 155      			TMR28_B		= 6
                  7                 1- 156      			TMR29_B		= 7
                                    1-0157      		
                 1A                 1- 158      		ANAEN		EQU	0x1a
                  7                 1- 159      			CMPEN_B		= 7
                                    1-0160      		
                 1B                 1- 161      		RFC		EQU	0x1b
                  0                 1- 162      			PSEL0_B		= 0
                  1                 1- 163      			PSEL1_B		= 1
                  2                 1- 164      			PSEL2_B		= 2
                  3                 1- 165      			PSEL3_B		= 3
                                    1-0166      		
                  7                 1- 167      			RFCEN_B		= 7
                                    1-0168      			
                 1C                 1- 169      		TM3RH		EQU	0x1c
                  0                 1- 170      			PWM3D8_B	= 0
                  1                 1- 171      			PWM3D9_B	= 1
                                    1-0172      			
                  4                 1- 173      			TMR38_B		= 4
                  5                 1- 174      			TMR39_B		= 5
                                    1-0175      		
                 1F                 1- 176      		INTE2		EQU	0x1f
                  0                 1- 177      			T3IE_B		= 0
                                    1-0178      			
                  4                 1- 179      			T3IF_B		= 4
                                    1-0180      
                                    1-0181      ;; T0MD Register
                  0                 1- 182      			PS0SEL0_B	= 0
                  1                 1- 183      			PS0SEL1_B	= 1
                  2                 1- 184      			PS0SEL2_B	= 2
                  3                 1- 185      			PS0WDT_B	= 3
                  4                 1- 186      			T0CE_B		= 4
                  5                 1- 187      			T0CS_B		= 5
                                    1-0188      			
                  7                 1- 189      			LCKTM0_B	= 7	
                                    1-0190      		
                                    1-0191      
                                    1-0192      ;; Register F
                  5                 1- 193      		IOSTA		EQU	0x05
                  6                 1- 194      		IOSTB		EQU	0x06
                  9                 1- 195      		APHCON		EQU	0x09
                                    1-0196      		
                  A                 1- 197      		PS0CV		EQU	0x0a
                  C                 1- 198      		BOBCON		EQU	0x0c
                                    1-0199      		
                  E                 1- 200      		CMPCR		EQU	0x0e
                                    1-0201      		
                  F                 1- 202      		PCON1		EQU	0x0f
                  0                 1- 203      			T0EN_B		= 0
                                    1-0204      			
                  2                 1- 205      			LVDS0_B		= 2
                  3                 1- 206      			LVDS1_B		= 3
                  4                 1- 207      			LVDS2_B		= 4
                                    1-0208      			
                  6                 1- 209      			LVDOUT_B	= 6
                  7                 1- 210      			GIE_B		= 7
                                    1-0211      		
                                    1-0212      ;; Register S
                  0                 1- 213      		TMR1		EQU	0x00
                                    1-0214      		
                  1                 1- 215      		T1CR1		EQU	0x01
                  0                 1- 216      			T1EN_B		= 0
                  1                 1- 217      			T1RL_B		= 1
                  2                 1- 218      			T1OS_B		= 2
                                    1-0219      			
                  6                 1- 220      			PWM1OAL_B	= 6
                  7                 1- 221      			PWM1OEN_B	= 7
                                    1-0222      			
                  2                 1- 223      		T1CR2		EQU	0x02
                  0                 1- 224      			PS1SEL0_B	= 0
                  1                 1- 225      			PS1SEL1_B	= 1
                  2                 1- 226      			PS1SEl2_B	= 2
                  3                 1- 227      			PS1EN_B		= 3
                  4                 1- 228      			T1CE_B		= 4
                  5                 1- 229      			T1CS_B		= 5
                                    1-0230      			
                  3                 1- 231      		PWM1DUTY	EQU	0x03
                  4                 1- 232      		PS1CV		EQU	0x04
                  5                 1- 233      		BZ1CR		EQU	0x05
                  0                 1- 234      			BZ1FSEL0_B	= 0
                  1                 1- 235      			BZ1FSEL1_B	= 1
                  2                 1- 236      			BZ1FSEL2_B	= 2
                  3                 1- 237      			BZ1FSEL3_B	= 3
                                    1-0238      			
                  7                 1- 239      			BZ1EN_B		= 7
                                    1-0240      		
                  6                 1- 241      		IRCR		EQU	0x06
                  0                 1- 242      			IREN_B		= 0
                  1                 1- 243      			IRF57K_B	= 1
                  2                 1- 244      			IRCSEL_B	= 2
                                    1-0245      			
                  7                 1- 246      			IROSC358M_B	= 7
                                    1-0247      			
                  7                 1- 248      		TBHP		EQU	0x07
                  8                 1- 249      		TBHD		EQU	0x08
                                    1-0250      
                  9                 1- 251      		TMR2		EQU	0x09
                                    1-0252      		
                  A                 1- 253      		T2CR1		EQU	0x0A
                  0                 1- 254      			T2EN_B		= 0
                  1                 1- 255      			T2RL_B		= 1
                  2                 1- 256      			T2OS_B		= 2
                                    1-0257      			
                  6                 1- 258      			PWM2OAL_B	= 6
                  7                 1- 259      			PWM2OEN_B	= 7
                                    1-0260      			
                  B                 1- 261      		T2CR2		EQU	0x0B
                  0                 1- 262      			PS2SEL0_B	= 0
                  1                 1- 263      			PS2SEL1_B	= 1
                  2                 1- 264      			PS2SEl2_B	= 2
                  3                 1- 265      			PS2EN_B		= 3
                  4                 1- 266      			T2CE_B		= 4
                  5                 1- 267      			T2CS_B		= 5
                                    1-0268      
                  C                 1- 269      		PWM2DUTY	EQU	0x0C
                  D                 1- 270      		PS2CV		EQU	0x0D
                                    1-0271      		
                  E                 1- 272      		BZ2CR		EQU	0x0E
                  0                 1- 273      			BZ2FSEL0_B	= 0
                  1                 1- 274      			BZ2FSEL1_B	= 1
                  2                 1- 275      			BZ2FSEL2_B	= 2
                  3                 1- 276      			BZ2FSEL3_B	= 3
                                    1-0277      			
                  7                 1- 278      			BZ2EN_B		= 7
                                    1-0279      			
                  F                 1- 280      		OSCCR		EQU	0x0f
                  0                 1- 281      			SELHSC_B	= 0
                  1                 1- 282      			STPHOSC_B	= 1
                  2                 1- 283      			OPMD0_B		= 2
                  3                 1- 284      			OPMD1_B		= 3
                  4                 1- 285      			CMPIE_B		= 4
                  5                 1- 286      			CMPIF_B		= 5
                  6                 1- 287      			CMPOE_B		= 6
                  7                 1- 288      			CMPOUT_B	= 7
                                    1-0289      		
                 10                 1- 290      		TMR3		EQU	0x10
                                    1-0291      		
                 11                 1- 292      		T3CR1		EQU	0x11
                  0                 1- 293      			T3EN_B		= 0
                  1                 1- 294      			T3RL_B		= 1
                  2                 1- 295      			T3OS_B		= 2
                                    1-0296      			
                  6                 1- 297      			PWM3OAL_B	= 6
                  7                 1- 298      			PWM3OEN_B	= 7
                                    1-0299      		
                 12                 1- 300      		T3CR2		EQU	0x12
                  0                 1- 301      			PS3SEL0_B	= 0
                  1                 1- 302      			PS3SEL1_B	= 1
                  2                 1- 303      			PS3SEL2_B	= 2
                  3                 1- 304      			PS3EN_B		= 3
                  4                 1- 305      			T3CE_B		= 4
                  5                 1- 306      			T3CS_B		= 5
                                    1-0307      		
                 13                 1- 308      		PWM3DUTY	EQU	0x13
                                    1-0309      		
                 14                 1- 310      		PS3CV		EQU	0x14
                                    1-0311      		
                 15                 1- 312      		BZ3CR		EQU	0x15
                  0                 1- 313      			BZ3FSEL0_B	= 0
                  1                 1- 314      			BZ3FSEL1_B	= 1
                  2                 1- 315      			BZ3FSEL2_B	= 2
                  3                 1- 316      			BZ3FSEL3_B	= 3
                                    1-0317      			
                  7                 1- 318      			BZ3EN_B		= 7
                                    1-0319      		
                                    1-0320      		
                                    1-0321      	
                                    1-0322      
                  1                 1- 323      		f	= 1
                  1                 1- 324      		R	= 1
                  0                 1- 325      		W	= 0
                  0                 1- 326      		A	= 0
                                    0-0014      
                                    0-0015      		
                                    0-0016      ;; User Register Define (0x20~0x7F)
                 20                 0-  17      	R_ACC_Buf	EQU		0x20
                 21                 0-  18      	R_Status_Buf	EQU		0x21
                 22                 0-  19      	R_flag		EQU		0x22
                  0                 0-  20      		f_1ms		= 0
                  1                 0-  21      		f_Sleep		= 1
                  2                 0-  22      		f_TimeOut	= 2
                 23                 0-  23      	R_100ms_Reg	EQU		0x23
                 24                 0-  24      	R_1S_Reg	EQU		0x24
                 25                 0-  25      	R_CountTemp1	EQU		0x25
                 26                 0-  26      	R_CountTemp2	EQU		0x26
                 27                 0-  27      	R_OSCCRTEMP	EQU		0x27
                                    0-0028      
                                    0-0029      
                                    0-0030      ;; Chip Reset Vector
                                    0-0031      ; ===============================================================
                  0                 0-  32      		ORG	0x00
                  0                 0-  33      Reset:
        0 321D                      0-  34     		GOTO	Main_Prog
                                    0-0035      
                                    0-0036      ;; ISR Vector
                  8                 0-  37      		ORG	0x08
                  8                 0-  38      ISR_Prog:
        8 00A0                      0-  39     		MOVAR		R_ACC_Buf			;; 保留 ACC 及 Status 的状态值
        9 15A0                      0-  40     		SWAPR		R_ACC_Buf, R
        A 1503                      0-  41     		SWAPR		STATUS, A
        B 00A1                      0-  42     		MOVAR		R_Status_Buf
                                    0-0043      	
                  C                 0-  44      	ISR_Prog100:
        C 0B0F                      0-  45     		BTRSS		INTF, WDTIF_B
        D 3212                      0-  46     		GOTO		ISR_Prog200
        E 21BF                      0-  47     		MOVIA		0xBF				;; Clear WDT INT Flag
        F 008F                      0-  48     		MOVAR		INTF
       10 2102                      0-  49     		MOVIA		0x02
       11 1286                      0-  50     		XORAR		PB, R
                                    0-0051      	
                 12                 0-  52      	ISR_Prog200:
       12 080F                      0-  53     		BTRSS		INTF, T0IF_B
       13 3219                      0-  54     		GOTO		ISR_End
       14 21FE                      0-  55     		MOVIA		0xFE
       15 008F                      0-  56     		MOVAR		INTF				;; CLR TIMER0 FLAG
       16 2101                      0-  57     		MOVIA		0x01
       17 1286                      0-  58     		XORAR		PB, R
       18 1822                      0-  59     		BSR		R_Flag, f_1ms
                                    0-0060      
                 19                 0-  61      	ISR_End:
       19 1521                      0-  62     		SWAPR		R_Status_Buf, A			;; 取回 ACC	及 Status 的状态值
       1A 0083                      0-  63     		MOVAR		STATUS
       1B 1520                      0-  64     		SWAPR		R_ACC_Buf, A
       1C 0011                      0-  65     		RETIE
                                    0-0066      		
                                    0-0067      		
                                    0-0068      
                                    0-0069      ;; Main Program
                 1D                 0-  70      Main_Prog:
       1D 2861                      0-  71     		LCALL		F_ClearAllRAM
       1E 2868                      0-  72     		LCALL		F_IOInit
                                    0-0073      		
       1F 2101                      0-  74     		MOVIA		0x01				;; ENABLE T0 Interrupt
       20 008E                      0-  75     		MOVAR		INTE
                                    0-0076      		
       21 0004                      0-  77     		ENI						;; Enable Goble Interrupt
                                    0-0078      
                 22                 0-  79      Main_Start:
       22 1D22                      0-  80     		BCR		R_Flag, f_TimeOut
       23 2875                      0-  81     		LCALL		F_NormalMode_Set		;; 切换到4M/2T模式，并且设定Timer0=1.024ms
                 24                 0-  82      	Normal_Test:
       24 0002                      0-  83     		CLRWDT
       25 283D                      0-  84     		LCALL		F_Time_Count
       26 0922                      0-  85     		BTRSS		R_Flag, f_TimeOut
       27 3224                      0-  86     		GOTO		Normal_Test
                                    0-0087      		
       28 1D22                      0-  88     		BCR		R_Flag, f_TimeOut
       29 2889                      0-  89     		LCALL		F_SlowMode_Set			;; 切换到32K/2T模式，并且设定Timer0=32ms
                 2A                 0-  90      	SlowMode_Test:
       2A 0002                      0-  91     		CLRWDT
       2B 283D                      0-  92     		LCALL		F_Time_Count
       2C 0922                      0-  93     		BTRSS		R_Flag, f_TimeOut
       2D 322A                      0-  94     		GOTO		SlowMode_Test
                                    0-0095      
       2E 1D22                      0-  96     		BCR		R_Flag, f_TimeOut
                                    0-0097      		
                 2F                 0-  98      	StandbyMode_Test:
       2F 289D                      0-  99     		LCALL		F_WDT_4s			;; if WDT is Int (2S)
                                    0-0100      ;into standby Mode (Wait 4S)
       30 210A                      0- 101     		MOVIA		0x0A				;; 切换到StandBy Mode (L_IRC=32KHz/4T) & Disable H_IRC OSC
       31 004F                      0- 102     		SFUN		OSCCR
                                    0-0103      		;SFUNR		OSCCR
                                    0-0104      		;MOVAR		R_OSCCRTEMP
                                    0-0105      		;BSR		R_OSCCRTEMP, 3
                                    0-0106      		;BCR		R_OSCCRTEMP, 2
                                    0-0107      		;BSR		R_OSCCRTEMP, 1
                                    0-0108      		;BCR		R_OSCCRTEMP, 0
                                    0-0109      		;MOVR		R_OSCCRTEMP, A
                                    0-0110      		;SFUN		OSCCR
                                    0-0111      		
       32 0000                      0- 112     		NOP
       33 0000                      0- 113     		NOP
                                    0-0114      ;into Normal Mode(1S)
       34 1D22                      0- 115     		BCR		R_Flag, f_TimeOut
       35 2875                      0- 116     		LCALL		F_NormalMode_Set		;; 切换到4M/2T模式，并且设定Timer0=1.024ms		
                 36                 0- 117      	Normal_Test1:
       36 0002                      0- 118     		CLRWDT
       37 283D                      0- 119     		LCALL		F_Time_Count
       38 0922                      0- 120     		BTRSS		R_Flag, f_TimeOut
       39 3236                      0- 121     		GOTO		Normal_Test1
                                    0-0122      
                                    0-0123      ;; into Sleep Mode (Wait 4S)
       3A 1D22                      0- 124     		BCR		R_Flag, f_TimeOut
       3B 284F                      0- 125     		LCALL		F_SleepMode
                                    0-0126      
       3C 3222                      0- 127     		GOTO		Main_Start
                                    0-0128      
                                    0-0129      
                                    0-0130      
                                    0-0131      
                 3D                 0- 132      F_Time_Count:
       3D 0822                      0- 133     		BTRSS		R_Flag, f_1ms
       3E 0010                      0- 134     		RET
                                    0-0135      		
       3F 1C22                      0- 136     		BCR		R_Flag, f_1ms
                                    0-0137      		
       40 05A3                      0- 138     		incr		R_100ms_Reg, R
       41 0125                      0- 139     		MOVR		R_CountTemp1, W
       42 0423                      0- 140     		SUBAR		R_100ms_Reg, W
       43 0803                      0- 141     		BTRSS		Status, C_B
       44 0010                      0- 142     		RET
       45 02A3                      0- 143     		CLRR		R_100ms_Reg
       46 05A4                      0- 144     		INCR		R_1S_Reg, R
       47 0126                      0- 145     		MOVR		R_CountTemp2, W
       48 0424                      0- 146     		SUBAR		R_1S_Reg, W
       49 0803                      0- 147     		BTRSS		Status, C_B
       4A 0010                      0- 148     		RET
       4B 02A3                      0- 149     		CLRR		R_100ms_Reg
       4C 02A4                      0- 150     		CLRR		R_1S_Reg
       4D 1922                      0- 151     		BSR		R_Flag, f_TimeOut
       4E 0010                      0- 152     		RET
                                    0-0153      		
                                    0-0154      
                                    0-0155      
                 4F                 0- 156      F_SleepMode:
       4F 2108                      0- 157     		MOVIA		0x08
       50 0089                      0- 158     		MOVAR		BWUCON					;; PB3 is Wackup pin
                                    0-0159      
       51 0013                      0- 160     		DISI							;; DIsable Int
                                    0-0161      		
       52 2100                      0- 162     		MOVIA		0x00
       53 0088                      0- 163     		MOVAR		PCON					;; disable wdt & LVDT
       54 2102                      0- 164     		MOVIA		0x02
       55 008E                      0- 165     		MOVAR		INTE
       56 2100                      0- 166     	 	MOVIA		0x00
       57 008F                      0- 167     	 	MOVAR		INTF
       58 0186                      0- 168     		MOVR		PB, R
                                    0-0169      
                                    0-0170      	;; into Sleep Status
       59 0000                      0- 171     		NOP
       5A 0000                      0- 172     		NOP
       5B 0001                      0- 173     		SLEEP							;; into sleep mode
       5C 0000                      0- 174     		NOP
       5D 0000                      0- 175     		NOP
       5E 2188                      0- 176     		MOVIA		0x88
       5F 0088                      0- 177     		MOVAR		PCON
                 60                 0- 178      	F_SleepMode900:
       60 0010                      0- 179     		RET
                                    0-0180      
                                    0-0181      
                                    0-0182      ;==================================================================
                                    0-0183      ; Project Name:	清零全部RAM
                                    0-0184      ; Last Modify Date:2010-11-9 16:12
                                    0-0185      ;
                                    0-0186      ; Clear	RAM 0x20~0x7f
                 61                 0- 187      F_ClearAllRAM:
                                    0-0188      	;Bank0	
       61 2120                      0- 189     		MOVIA		0x20				;; 切换到 RAM Bank0
       62 0084                      0- 190     		MOVAR		FSR
                 63                 0- 191      	L_Clear_Next_Byte_Bank0:
       63 0280                      0- 192     		CLRR		INDF				;; 清除该地址资料
       64 0584                      0- 193     		INCR		FSR, R				;; 累加间接地址
       65 0B84                      0- 194     		BTRSS		FSR, 7
       66 3263                      0- 195     		GOTO		L_Clear_Next_Byte_Bank0		;; 否，跳跃
                                    0-0196      		
       67 0010                      0- 197     		RET
                                    0-0198      
                                    0-0199      ;====================================================================
                                    0-0200      ; Project Name: IO 初始化
                                    0-0201      ; Madify Data: 2014.12.11
                                    0-0202      ;
                 68                 0- 203      F_IOInit:
       68 21FF                      0- 204     		MOVIA		0xff
       69 0086                      0- 205     		MOVAR		PB				;; 初始值
       6A 0085                      0- 206     		MOVAR		PA
       6B 2108                      0- 207     		MOVIA		0x08
       6C 0006                      0- 208     		IOST		PB				;; 设定为IO状态	0=Output,  1=Input
       6D 21FF                      0- 209     		MOVIA		0xff				;; 设定PA状态  0=Output, 1=Input
       6E 0005                      0- 210     		IOST		PA
                                    0-0211      
       6F 2100                      0- 212     		MOVIA		0x00
       70 008C                      0- 213     		MOVAR		BPHCON				;; Set PB have Pull-hi
       71 0009                      0- 214     		IOST		APHCON				;; Set PA have hull-hi, but PA5 is Pull-Low		
                                    0-0215      		
       72 2188                      0- 216     		MOVIA		0x88				;; 设定为 WDT(B7)=1:EN/0:DIS, PB0(B6)=1:INT/0:GPIO, LVR(B3)=1:EN/0:DIS
       73 0088                      0- 217     		MOVAR		PCON
                                    0-0218      
       74 0010                      0- 219     		RET
                                    0-0220      		
                                    0-0221      
                                    0-0222      ;====================================================================
                                    0-0223      ; Project Name: Normal Mode 初始化 
                                    0-0224      ; Madify Data: 2014.12.11
                 75                 0- 225      F_NormalMode_Set:
                                    0-0226      ;; into High Frequency Mode
       75 006F                      0- 227     		SFUNR		OSCCR			;; 读取目前震荡模式 
                                    0-0228      		
       76 22FD                      0- 229     		ANDIA		0xFD			;; 开启 Normal Mode 高速频率电路
       77 004F                      0- 230     		SFUN		OSCCR
                                    0-0231      		
       78 2301                      0- 232     		IORIA		0x01			;; Fosc切换到高速频率(H_IRC=4MHz)
       79 004F                      0- 233     		SFUN		OSCCR
                                    0-0234      		
       7A 0013                      0- 235     		DISI
                                    0-0236      		
       7B 2100                      0- 237     		MOVIA		0x00
       7C 0081                      0- 238     		MOVAR		TMR0
       7D 21BF                      0- 239     		MOVIA		0xBF
       7E 210F                      0- 240     		MOVIA		INTF			;; Clr Timer0 Flag
                                    0-0241      
       7F 2102                      0- 242     		MOVIA		0x02			;; Set Timer0 Prescale=1:8 (1.024ms)
       80 0003                      0- 243     		T0MD
                                    0-0244      
       81 2101                      0- 245     		MOVIA		0x01			;; Timer0 Enable
       82 008E                      0- 246     		MOVAR		INTE
                                    0-0247      
       83 2164                      0- 248     		MOVIA		100			;; 时间计算(1.024ms*100*40=4.096S)
       84 00A5                      0- 249     		MOVAR		R_CountTemp1
       85 2128                      0- 250     		MOVIA		40
       86 00A6                      0- 251     		MOVAR		R_CountTemp2
                                    0-0252      		
       87 0004                      0- 253     		ENI
                                    0-0254      		
       88 0010                      0- 255     		RET
                                    0-0256      
                                    0-0257      ;====================================================================
                                    0-0258      ; Project Name: Slow Mode 初始化 
                                    0-0259      ; Madify Data: 2014.12.11
                 89                 0- 260      F_SlowMode_Set:
                                    0-0261      ;; into Slow Frequency Mode & Disable High Frequency
       89 006F                      0- 262     		SFUNR		OSCCR			;; 读取目前震荡模式
                                    0-0263      		
       8A 22FE                      0- 264     		ANDIA		0xfe			;; 切换到低速频率(L_IRC=32KHz)
       8B 004F                      0- 265     		SFUN		OSCCR
                                    0-0266      		
       8C 2302                      0- 267     		IORIA		0x02			;; 关闭高频震荡
       8D 004F                      0- 268     		SFUN		OSCCR
                                    0-0269      		
       8E 0013                      0- 270     		DISI
                                    0-0271      		
       8F 2100                      0- 272     		MOVIA		0x00
       90 0081                      0- 273     		MOVAR		TMR0
       91 21BF                      0- 274     		MOVIA		0xBF
       92 210F                      0- 275     		MOVIA		INTF			;; Clr Timer0 Flag
                                    0-0276      
       93 2100                      0- 277     		MOVIA		0x00			;; Set Timer0 Prescale=1:2 (32ms)
       94 0003                      0- 278     		T0MD
                                    0-0279      
       95 2101                      0- 280     		MOVIA		0x01			;; Timer0 Enable
       96 008E                      0- 281     		MOVAR		INTE
                                    0-0282      
       97 210A                      0- 283     		MOVIA		10			;; 时间计算(32ms*10*10=3.2S)
       98 00A5                      0- 284     		MOVAR		R_CountTemp1
       99 210A                      0- 285     		MOVIA		10			;; 320ms*0=3.2s
       9A 00A6                      0- 286     		MOVAR		R_CountTemp2
                                    0-0287      		
       9B 0004                      0- 288     		ENI
                                    0-0289      		
       9C 0010                      0- 290     		RET
                                    0-0291      
                                    0-0292      
                                    0-0293      ;====================================================================
                                    0-0294      ; Project Name: WDT 初始化 
                                    0-0295      ; Madify Data: 2014.12.11
                 9D                 0- 296      F_WDT_4S:
       9D 2100                      0- 297     		MOVIA		0x00		;; 关闭 WDT & lvdt 
       9E 0088                      0- 298     		MOVAR		PCON
       9F 0002                      0- 299     		CLRWDT				;; clar WDT
       A0 210B                      0- 300     		MOVIA		0x0B		;; Set WDT Prescaler(1:16) (WDT=250ms*16=4S)
       A1 0003                      0- 301     		T0MD
       A2 2180                      0- 302     		MOVIA		0x80		;; Enable WDT，关闭lvdt
       A3 0088                      0- 303     		MOVAR		PCON
       A4 2100                      0- 304     	 	MOVIA		0x00		;; clear all int_flag
       A5 008F                      0- 305     	 	MOVAR		INTF
       A6 2140                      0- 306     		MOVIA		0x40		;; Enable WDT Int & Disable TM0 Int 
       A7 008E                      0- 307     		MOVAR		INTE
                                    0-0308      
       A8 0010                      0- 309     	 	RET
                                    0-0310      
                                    0-0311      		end

ATWASM 2.14 [Build 180510.00]  File=C:\Users\USER\Documents\ATW\ATW南翔科技专案资料\九齐相关资料\Demo Code\AT8B62D\Mode Change Demo Code\Mode Change Demo Code\Mode Change Demo Code.asm Date=2018/5/12 17:24:57

SYMBOL TABLE            TYPE     VALUE

__8B062D                Constant 00000001
__PROCESSOR__           Constant 00008012
A                       Variable 00000000
ABPLCON                 Constant 0000000B
AD0_B                   Variable 00000000
AD1_B                   Variable 00000001
AD2_B                   Variable 00000002
AD3_B                   Variable 00000003
ADCK0_B                 Variable 00000004
ADCK1_B                 Variable 00000005
ADCR                    Constant 00000014
ADCR0_B                 Variable 00000000
ADCR1_B                 Variable 00000001
ADD                     Constant 00000012
ADEN_B                  Variable 00000007
ADIE_B                  Variable 00000006
ADIF_B                  Variable 00000007
ADMD                    Constant 00000010
ADR                     Constant 00000011
ADVREFH                 Constant 00000013
ANAEN                   Constant 0000001A
APHCON                  Constant 00000009
AWUCON                  Constant 00000015
BK0_B                   Variable 00000006
BK1_B                   Variable 00000007
BOBCON                  Constant 0000000C
BPHCON                  Constant 0000000C
BWUCON                  Constant 00000009
BZ1CR                   Constant 00000005
BZ1EN_B                 Variable 00000007
BZ1FSEL0_B              Variable 00000000
BZ1FSEL1_B              Variable 00000001
BZ1FSEL2_B              Variable 00000002
BZ1FSEL3_B              Variable 00000003
BZ2CR                   Constant 0000000E
BZ2EN_B                 Variable 00000007
BZ2FSEL0_B              Variable 00000000
BZ2FSEL1_B              Variable 00000001
BZ2FSEL2_B              Variable 00000002
BZ2FSEL3_B              Variable 00000003
BZ3CR                   Constant 00000015
BZ3EN_B                 Variable 00000007
BZ3FSEL0_B              Variable 00000000
BZ3FSEL1_B              Variable 00000001
BZ3FSEL2_B              Variable 00000002
BZ3FSEL3_B              Variable 00000003
C_B                     Variable 00000000
CHS0_B                  Variable 00000000
CHS1_B                  Variable 00000001
CHS2_B                  Variable 00000002
CHS3_B                  Variable 00000003
CMPCR                   Constant 0000000E
CMPEN_B                 Variable 00000007
CMPIE_B                 Variable 00000004
CMPIF_B                 Variable 00000005
CMPOE_B                 Variable 00000006
CMPOUT_B                Variable 00000007
DC_B                    Variable 00000001
EIS0_B                  Variable 00000004
EIS1_B                  Variable 00000005
EOC_B                   Variable 00000005
EVHENB_B                Variable 00000007
F                       Variable 00000001
F_1MS                   Variable 00000000
F_CLEARALLRAM           Label    00000061
F_IOINIT                Label    00000068
F_NORMALMODE_SET        Label    00000075
F_SLEEP                 Variable 00000001
F_SLEEPMODE             Label    0000004F
F_SLEEPMODE900          Label    00000060
F_SLOWMODE_SET          Label    00000089
F_TIME_COUNT            Label    0000003D
F_TIMEOUT               Variable 00000002
F_WDT_4S                Label    0000009D
FSR                     Constant 00000004
GCHS_B                  Variable 00000004
GIE_B                   Variable 00000007
INDF                    Constant 00000000
INT0G0_B                Variable 00000000
INT0G1_B                Variable 00000001
INT0IE_B                Variable 00000002
INT0IF_B                Variable 00000002
INT1G0_B                Variable 00000002
INT1G1_B                Variable 00000003
INT1IE_B                Variable 00000007
INT2IF_B                Variable 00000007
INTE                    Constant 0000000E
INTE2                   Constant 0000001F
INTEDG                  Constant 00000018
INTF                    Constant 0000000F
IOSTA                   Constant 00000005
IOSTB                   Constant 00000006
IRCR                    Constant 00000006
IRCSEL_B                Variable 00000002
IREN_B                  Variable 00000000
IRF57K_B                Variable 00000001
IROSC358M_B             Variable 00000007
ISR_END                 Label    00000019
ISR_PROG                Label    00000008
ISR_PROG100             Label    0000000C
ISR_PROG200             Label    00000012
L_CLEAR_NEXT_BYTE_BANK0 Label    00000063
LCKTM0_B                Variable 00000007
LVDEN_B                 Variable 00000005
LVDOUT_B                Variable 00000006
LVDS0_B                 Variable 00000002
LVDS1_B                 Variable 00000003
LVDS2_B                 Variable 00000004
LVDTIE_B                Variable 00000004
LVDTIF_B                Variable 00000004
LVREN_B                 Variable 00000003
MAIN_PROG               Label    0000001D
MAIN_START              Label    00000022
NORMAL_TEST             Label    00000024
NORMAL_TEST1            Label    00000036
OPMD0_B                 Variable 00000002
OPMD1_B                 Variable 00000003
OSCCR                   Constant 0000000F
PA                      Constant 00000005
PA0_B                   Variable 00000000
PA1_B                   Variable 00000001
PA2_B                   Variable 00000002
PA3_B                   Variable 00000003
PA4_B                   Variable 00000004
PA5_B                   Variable 00000005
PA6_B                   Variable 00000006
PA7_B                   Variable 00000007
PABIE_B                 Variable 00000001
PABIF_B                 Variable 00000001
PACON                   Constant 00000016
PACON0_B                Variable 00000000
PACON1_B                Variable 00000001
PACON2_B                Variable 00000002
PACON3_B                Variable 00000003
PACON4_B                Variable 00000004
PB                      Constant 00000006
PB0_B                   Variable 00000000
PB1_B                   Variable 00000001
PB2_B                   Variable 00000002
PB3_B                   Variable 00000003
PB4_B                   Variable 00000004
PB5_B                   Variable 00000005
PB6_B                   Variable 00000006
PB7_B                   Variable 00000007
PBCON0_B                Variable 00000005
PBCON1_B                Variable 00000006
PBCON2_B                Variable 00000007
PBCON4_B                Variable 00000006
PCHBUF                  Constant 0000000A
PCL                     Constant 00000002
PCON                    Constant 00000008
PCON1                   Constant 0000000F
PD_B                    Variable 00000003
PHPA5_B                 Variable 00000004
PS0CV                   Constant 0000000A
PS0SEL0_B               Variable 00000000
PS0SEL1_B               Variable 00000001
PS0SEL2_B               Variable 00000002
PS0WDT_B                Variable 00000003
PS1CV                   Constant 00000004
PS1EN_B                 Variable 00000003
PS1SEL0_B               Variable 00000000
PS1SEL1_B               Variable 00000001
PS1SEL2_B               Variable 00000002
PS2CV                   Constant 0000000D
PS2EN_B                 Variable 00000003
PS2SEL0_B               Variable 00000000
PS2SEL1_B               Variable 00000001
PS2SEL2_B               Variable 00000002
PS3CV                   Constant 00000014
PS3EN_B                 Variable 00000003
PS3SEL0_B               Variable 00000000
PS3SEL1_B               Variable 00000001
PS3SEL2_B               Variable 00000002
PSEL0_B                 Variable 00000000
PSEL1_B                 Variable 00000001
PSEL2_B                 Variable 00000002
PSEL3_B                 Variable 00000003
PWM1DUTY                Constant 00000003
PWM1DUTY8_B             Variable 00000000
PWM1DUTY9_B             Variable 00000001
PWM1OAL_B               Variable 00000006
PWM1OEN_B               Variable 00000007
PWM2DUTY                Constant 0000000C
PWM2DUTY8_B             Variable 00000002
PWM2DUTY9_B             Variable 00000003
PWM2OAL_B               Variable 00000006
PWM2OEN_B               Variable 00000007
PWM3D8_B                Variable 00000000
PWM3D9_B                Variable 00000001
PWM3DUTY                Constant 00000013
PWM3OAL_B               Variable 00000006
PWM3OEN_B               Variable 00000007
R                       Variable 00000001
R_100MS_REG             Constant 00000023
R_1S_REG                Constant 00000024
R_ACC_BUF               Constant 00000020
R_COUNTTEMP1            Constant 00000025
R_COUNTTEMP2            Constant 00000026
R_FLAG                  Constant 00000022
R_OSCCRTEMP             Constant 00000027
R_STATUS_BUF            Constant 00000021
RESET                   Label    00000000
RFC                     Constant 0000001B
RFCEN_B                 Variable 00000007
SELHSC_B                Variable 00000000
SHCK0_B                 Variable 00000002
SHCK1_B                 Variable 00000003
SLOWMODE_TEST           Label    0000002A
STANDBYMODE_TEST        Label    0000002F
START_B                 Variable 00000006
STATUS                  Constant 00000003
STPHOSC_B               Variable 00000001
T0CE_B                  Variable 00000004
T0CS_B                  Variable 00000005
T0EN_B                  Variable 00000000
T0IE_B                  Variable 00000000
T0IF_B                  Variable 00000000
T1CE_B                  Variable 00000004
T1CR1                   Constant 00000001
T1CR2                   Constant 00000002
T1CS_B                  Variable 00000005
T1EN_B                  Variable 00000000
T1IE_B                  Variable 00000003
T1IF_B                  Variable 00000003
T1OS_B                  Variable 00000002
T1RL_B                  Variable 00000001
T2CE_B                  Variable 00000004
T2CR1                   Constant 0000000A
T2CR2                   Constant 0000000B
T2CS_B                  Variable 00000005
T2EN_B                  Variable 00000000
T2IE_B                  Variable 00000005
T2IF_B                  Variable 00000005
T2OS_B                  Variable 00000002
T2RL_B                  Variable 00000001
T3CE_B                  Variable 00000004
T3CR1                   Constant 00000011
T3CR2                   Constant 00000012
T3CS_B                  Variable 00000005
T3EN_B                  Variable 00000000
T3IE_B                  Variable 00000000
T3IF_B                  Variable 00000004
T3OS_B                  Variable 00000002
T3RL_B                  Variable 00000001
TBHD                    Constant 00000008
TBHP                    Constant 00000007
TM3RH                   Constant 0000001C
TMR0                    Constant 00000001
TMR1                    Constant 00000000
TMR18_B                 Variable 00000004
TMR19_B                 Variable 00000005
TMR2                    Constant 00000009
TMR28_B                 Variable 00000006
TMR29_B                 Variable 00000007
TMR3                    Constant 00000010
TMR38_B                 Variable 00000004
TMR39_B                 Variable 00000005
TMRH                    Constant 00000019
TO_B                    Variable 00000004
VHS0_B                  Variable 00000000
VHS1_B                  Variable 00000001
W                       Variable 00000000
WDTEN_B                 Variable 00000007
WDTIE_B                 Variable 00000006
WDTIF_B                 Variable 00000006
WUPA0_B                 Variable 00000000
WUPA1_B                 Variable 00000001
WUPA2_B                 Variable 00000002
WUPA3_B                 Variable 00000003
WUPA4_B                 Variable 00000004
WUPA5_B                 Variable 00000005
WUPA6_B                 Variable 00000006
WUPA7_B                 Variable 00000007
XSPD_STP_B              Variable 00000006
Z_B                     Variable 00000002


SOURCE FILE TABLE
000 C:\Users\USER\Documents\ATW\ATW南翔科技专案资料\九齐相关资料\Demo Code\AT8B62D\Mode Change Demo Code\Mode Change Demo Code\Mode Change Demo Code.asm
001 C:\Users\USER\Documents\ATW\ATW南翔科技专案资料\九齐相关资料\Demo Code\AT8B62D\Mode Change Demo Code\Mode Change Demo Code\AT8B62D.H

PROCESSOR    = AT8B62D (8 bits) 
PROGRAM ROM  = 0x00000000 - 0x000007FF
DATA ROM     = 0x00000000 - 0x000007FF
SRAM / SFR   = 0x00000000 - 0x00000000
